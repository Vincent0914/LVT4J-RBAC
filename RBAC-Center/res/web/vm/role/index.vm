#set($navs=['角色管理'])
#set($pageDesc='当前产品的角色的查询，修改与删除')
#parse('/header.vm')

<script src="/vm/role/index.js"></script>

##角色编辑
<div id="editRoleDiv" class="col-xs-12" style="display:none;"><div class="widget-box">
<div class="widget-header">
    <h4 class="widget-title" style="word-break:break-all;">编辑角色</h4>
    <div class="widget-toolbar">
        <a href="javascript:;" onclick="$(this).closest('.col-xs-12').slideUp()">
            <i class="ace-icon fa fa-close bigger-130"></i>
        </a>
    </div>
</div>
<div class="widget-body"><div class="widget-main">
<form class="form-horizontal">
    <p class="valid-err text-danger col-xs-9 col-xs-offset-3"></p>
    <input name="oldId" type="hidden"/>
    <div class="form-group">
        <label class="col-xs-3 control-label">ID：</label>
        <div class="col-xs-9" title="角色ID,建议以字母数字和下划线组成">
            <input name="id" data-required data-err="角色ID不能为空"
                type="text" class="form-control" placeholder="角色ID,建议以字母数字和下划线组成"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-xs-3 control-label">名称：</label>
        <div class="col-xs-9" title="角色名称，短名称">
            <input name="name" data-required data-err="角色名称不能为空"
                type="text" class="form-control" placeholder="角色名称，短名称"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-xs-3 control-label">描述：</label>
        <div class="col-xs-9" title="角色描述">
            <textarea name="des" data-required data-err="角色描述不能为空"
                type="text" class="form-control" style="min-height:150px;" placeholder="角色描述"></textarea>
        </div>
    </div>
    <div class="form-group">
        <label class="col-xs-3 control-label">访问项：</label>
        <div class="col-xs-9">
            <div class="input-group" style="width:100%">
                <select id="access" widget="select2" url="/edit/access/list.json" placeholder="请选择访问项" style="width:100%"></select>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-purple btn-sm" onclick="addAccess()" style="height:28px;line-height:13px;">添加</button>
                </span>
            </div><br>
            <div id="accesses" name="accessPatterns" data-type="arr" style="border:1px solid #d5d5d5;min-height:34px;"></div>
        </div>
    </div>
    <div class="form-group">
        <label class="col-xs-3 control-label">授权项：</label>
        <div class="col-xs-9">
            <div class="input-group" style="width:100%">
                <select id="permission" widget="select2" url="/edit/permission/list.json" placeholder="请选择授权项" style="width:100%"></select>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-purple btn-sm" onclick="addPermission()" style="height:28px;line-height:13px;">添加</button>
                </span>
            </div><br>
            <div id="permissions" name="permissionIds" data-type="arr" style="border:1px solid #d5d5d5;min-height:34px;"></div>
        </div>
    </div>
    <button type="button" class="btn btn-purple btn-block" onclick="editRoleSave()">保存</button>
</form>
</div></div>##widget-body
</div></div>##widget-box

##角色列表
<div class="col-xs-12"><div class="widget-box">
<div class="widget-header">
    <h4 class="widget-title">角色列表</h4>
    <div class="widget-toolbar" style="line-height:28px;">
        <div class="display:inline-block" style="width:150px;display:inline-block;padding-top:3px;vertical-align:top;">
            <select id="qAccess" onchange="loadRoles()" widget="select2" url="/edit/access/list.json" allow-clear="true" placeholder="请选择访问项" style="width:100%"></select>
        </div>
        <div class="display:inline-block" style="width:150px;display:inline-block;padding-top:3px;vertical-align:top;">
            <select id="qPermission" onchange="loadRoles()" widget="select2" url="/edit/permission/list.json" allow-clear="true" placeholder="请选择授权项" style="width:100%"></select>
        </div>
        <div style="width:200px;display:inline-block;">
            <div class="input-group" style="width:200px;">
                <input id="keyword" type="text" class="form-control" style="height:22px;margin-top:8px;" placeholder="请输入关键词">
                <span class="input-group-btn">
                    <button type="button" class="btn btn-purple btn-minier" onclick="loadRoles()" style="margin-top:8px;">
                        搜索<i class="ace-icon fa fa-search"></i>
                    </button>
                </span>
            </div>
        </div>
    </div>
</div>
<div id="rolesDiv" class="widget-body" style="display:none;"><div class="widget-main" style="padding-bottom:52px;">
<table class="table table-striped table-bordered table-hover table-condensed" style="margin-bottom:0;">
    <thead>
        <tr>
            <td title="角色的ID" style="min-width:100px;">ID</td>
            <td title="角色的名称" style="min-width:100px;">名称</td>
            <td title="角色拥有的访问项" style="width:300px;">访问项</td>
            <td title="角色拥有的授权项" style="width:300px;">授权项</td>
            <td style="width:88px;min-width:88px;">
                <button onclick="addRole()" title="增加一个新角色" type="button" class="btn btn-primary btn-minier">新增</button>
            </td>
        </tr>
    </thead>
    <tbody id="roles"></tbody>
</table>
<div id="rolesPager" widget="pager" class="pull-right" onpage="loadRoles()"></div>
</div></div>##widget-body
</div></div>##widget-box
#parse('/footer.vm')